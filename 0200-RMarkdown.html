<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>rmarkdown</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="0200-RMarkdown_files/libs/clipboard/clipboard.min.js"></script>
<script src="0200-RMarkdown_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="0200-RMarkdown_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="0200-RMarkdown_files/libs/quarto-html/popper.min.js"></script>
<script src="0200-RMarkdown_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="0200-RMarkdown_files/libs/quarto-html/anchor.min.js"></script>
<link href="0200-RMarkdown_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="0200-RMarkdown_files/libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="0200-RMarkdown_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="0200-RMarkdown_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="0200-RMarkdown_files/libs/bootstrap/bootstrap-81267100e462c21b3d6c0d5bf76a3417.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">




<section id="rmd" class="level1">
<h1>Rmd</h1>
<p><strong>R Markdown</strong> is a powerful tool for combining analysis and reporting into the same document. R Markdown has grown substantially from a package that supports a few output formats, to an extensive and diverse ecosystem that supports the creation of books, blogs, scientific articles, websites, and even resumes.</p>
<p>Nice documentations</p>
<ul>
<li><strong><code>rmarkdown</code></strong> package CRAN
<ul>
<li><a href="https://cran.r-project.org/web/packages/rmarkdown/index.html">Package CRAN page</a></li>
<li><a href="https://cran.r-project.org/web/packages/rmarkdown/rmarkdown.pdf">Reference manual</a></li>
</ul></li>
<li><strong><code>bookdown</code></strong> package CRAN
<ul>
<li><a href="https://cran.r-project.org/web/packages/bookdown/index.html">Package CRAN page</a></li>
<li><a href="https://cran.r-project.org/web/packages/bookdown/bookdown.pdf">Reference manual</a></li>
</ul></li>
<li><a href="https://bookdown.org/yihui/rmarkdown">R markdown: The definitive guide.</a> provides detailed references; GitHub repo <a href="https://github.com/rstudio/rmarkdown-book">HERE</a>.</li>
<li><a href="https://bookdown.org/yihui/rmarkdown-cookbook/">R markdown cookbook</a>: concise and covers essential functions, with examples.</li>
<li><a href="https://bookdown.org/yihui/bookdown/">Authoring Books with R Markdown</a>: with a focus on <code>bookdown</code>.</li>
</ul>
<p>Q: What is the difference between Rmd and R script?<br>
A:</p>
<ul>
<li>An R script (<code>.R</code>) is used for developing and troubleshooting code; a place where you can store reusable code fragments.</li>
<li>An R Markdown file (<code>.Rmd</code>) is used to integrate R commands with explanatory text and output, making it useful for creating reports.</li>
</ul>
<hr>
<p><strong>Quick takeaways</strong>:</p>
<ul>
<li>Can still use horizontal separator <code>ctrl + shift + S</code> for dashed lines and <code>ctrl + shift + =</code> for equals</li>
<li>Headers must have one empty line above and below to separate it from other text</li>
</ul>
<hr>
<section id="yaml-metadata" class="level2">
<h2 class="anchored" data-anchor-id="yaml-metadata">YAML metadata</h2>
<p>Q: What is YAML?<br>
A: YAML is a human-friendly data serialization language for all programming languages. YAML stands for “Yet Another Markup Language.”</p>
<p>Q: What does YAML do?<br>
A: It is placed at the very beginning of the document and is read by each of Pandoc, <strong>rmarkdown</strong>, and <strong>knitr</strong>.</p>
<ul>
<li>Provide metadata of the document.</li>
<li>Located at the top of the file.</li>
<li>Adheres to the YAML format and is delimited by lines containing three three dashes (<code>---</code>).</li>
</ul>
<p>YAML are also called <em>header</em> or <em>front matter</em>.</p>
<p>See <em>R Markdown YAML metadata (header) tutorial with examples</em> by <code>hao203</code> <a href="https://github.com/hao203/rmarkdown-YAML.git">HERE</a> for commonly used YAML metadata (header) in different R Markdown output formats.</p>
<p>There is NO official documentation for R Markdown YAML frontmatter because the YAML frontmatter is a collection of metadata and each individual piece of data might or not be used by a piece of software from your tool chain. That is, the behavior of YAML depends on your user platform.</p>
<p>For instance, the following metadata</p>
<pre><code>editor_options:
  chunk_output_type: console</code></pre>
<p>is used <em>exclusively</em> by RStudio to have the code block output “be shown in the R console instead of inside the source editor”. This option might be ignored by VSCode or Emacs.</p>
<hr>
<p>YAML can set values of the template variables, such as <code>title</code>, <code>author</code>, and <code>date</code> of the document.</p>
<ul>
<li><p>The <code>output</code> field is used by rmarkdown to apply the <span style="color:#00CC66"><strong>output format function</strong></span> <code>rmarkdown::html_document()</code> in the rendering process.</p>
<p>There are two types of output formats in the <strong>rmarkdown</strong> package: documents (e.g., <code>pdf_document</code>), and presentations (e.g., <code>beamer_presentation</code>).</p>
<p>Supported output format examples: <code>html_document</code>, <code>pdf_document</code>.</p>
<p>R Markdown documents (<code>html_documents</code>) and R Notebook documents (<code>html_notebook</code>) are very similar; in fact, an R Notebook document is a special type of R Markdown document. The main difference is using R Markdown document (<code>html_documents</code>) you have to knit (render) the entire document each time you want to preview the document, even if you have made a minor change. However, using an R Notebook document (<code>html_notebook</code>) you can view a preview of the final document without rendering the entire document.</p>
<p><strong>Troubleshooting</strong></p>
<p>Issue: <code>bookdown</code> always output html, even if specified to pdf.<br>
Cause: If it produces HTML, the output format must have been provided somewhere.<br>
Fix: Check if you have a <code>_output.yml</code> under the root directory of your book project. If you do, you may delete it. Then bookdown will use the output field that you specified in the YAML frontmatter of your Rmd document.</p>
<p>If there are two output formats, <code>rmarkdown::render()</code> defaults to use the first output type. If you want another, specify the type, e.g., <code>rmarkdown::render("0100-RStudio.Rmd", 'pdf_document')</code>.</p></li>
</ul>
<hr>
<p><strong><code>bookdown</code> wrappers</strong> of base markdown format</p>
<p><span style="color:#00CC66"><code>bookdown</code> output formats</span> allow numbering and cross-referencing figures/tables/equations. It takes the format <code>html_document2</code>, in general, <code>markdown_document2</code> is a wrapper for the base format <code>markdown_document</code>. With the <code>bookdown</code> output format, you can cross-reference sections by their ID’s using the same syntax when sections are numbered.</p>
<p>Other bookdown output format examples for single documents: <code>pdf_document2</code>, <code>beamer_presentation2</code>, <code>tufte_html2</code>, <code>word_document2</code>. See Page 12 of the <a href="https://cran.r-project.org/web/packages/bookdown/bookdown.pdf">reference manual</a> for a complete list of supported formats by <code>bookdown</code>.</p>
<p>What bookdown is very powerful for is that it compiles books. Book formats:</p>
<ul>
<li>HTML:
<ul>
<li><code>gitbook</code></li>
<li><code>html_book</code></li>
<li><code>tufte_html_book</code></li>
</ul></li>
<li>PDF:
<ul>
<li><code>pdf_book</code></li>
</ul></li>
<li>e-book:
<ul>
<li><code>epub_book</code></li>
</ul></li>
</ul>
<hr>
<ul>
<li><p>Many aspects of the LaTeX template used to create PDF documents can be customized using <span style="color:#00CC66"><strong>top-level</strong></span> <a href="https://bookdown.org/yihui/rmarkdown/pdf-document.html#tab:latex-vars">YAML metadata</a> (note that these options do <span style="color:#FF9900"><strong>NOT</strong></span> appear underneath the <code>output</code> section, but rather appear at the top level along with <code>title</code>, <code>author</code>, and so on). For example:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Crop Analysis Q3 2013"</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> pdf_document</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="an">fontsize:</span><span class="co"> 11pt</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="an">geometry:</span><span class="co"> margin=1in</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A few available metadata variables are displayed in the following (consult the Pandoc manual for <a href="https://pandoc.org/MANUAL.html#variables-for-latex">the full list</a>):</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Top-level YAML Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>lang</code></td>
<td>Document language code</td>
</tr>
<tr class="even">
<td><code>fontsize</code></td>
<td>Font size (e.g., <code>10pt</code>, <code>11pt</code>, or <code>12pt</code>)</td>
</tr>
<tr class="odd">
<td><code>papersize</code></td>
<td>Defines the paper size (e.g., <code>a4paper</code>, <code>letterpaper</code>)</td>
</tr>
<tr class="even">
<td><code>documentclass</code></td>
<td>LaTeX document class (e.g., <code>article</code>, <code>book</code>, and <code>report</code>)</td>
</tr>
<tr class="odd">
<td><code>classoption</code></td>
<td>A list of options to be passed to the document class, e.g., you can create a two-column document with the <code>twocolumn</code> option.</td>
</tr>
<tr class="even">
<td><code>geometry</code></td>
<td>Options for <a href="https://ctan.org/pkg/geometry"><code>geometry</code></a> package (e.g., <code>margin=1in</code> set all margins to be 1 inch)</td>
</tr>
<tr class="odd">
<td><code>mainfont</code>, <code>sansfont</code>, <code>monofont</code>, <code>mathfont</code></td>
<td>Document fonts (works only with <code>xelatex</code> and <code>lualatex</code>)</td>
</tr>
<tr class="even">
<td><code>linkcolor</code>, <code>urlcolor</code>, <code>citecolor</code></td>
<td>Color for internal links (cross references), external links (link to websites), and citation links (bibliography)</td>
</tr>
<tr class="odd">
<td><code>linestretch</code></td>
<td>Options for line spacing (e.g.&nbsp;1, 1.5, 3).</td>
</tr>
</tbody>
</table>
<p>Pandoc User’s Guide: <a href="https://www.uv.es/wiki/pandoc_manual_2.7.3.wiki?21" class="uri">https://www.uv.es/wiki/pandoc_manual_2.7.3.wiki?21</a></p>
<p><code>classoption</code></p>
<ul>
<li><p><strong><code>onecolumn</code>, <code>twocolumn</code></strong> - Instructs LaTeX to typeset the document in one column or two columns.</p></li>
<li><p><strong><code>twoside</code>, <code>oneside</code></strong>: Specifies whether double or single sided output should be generated. The classes’ article and report are single sided and the book class is double sided by default.</p>
<p>Note that this option concerns the style of the document only. The option two side does <em>NOT</em> tell the printer you use that it should actually make a two-sided printout.</p>
<p>The difference between single-sided and double-sided documents in LaTeX lies in the layout of the <u>page margins</u> and the orientation of the text on the page.</p>
<ul>
<li><p>Single-sided documents are printed on only one side of the page, with the text and images aligned to the right-hand side of the page. This type of layout is often used for brochures, flyers, and other types of promotional materials.</p></li>
<li><p>Double-sided documents are printed on both sides of the page, with the text and images alternating between right-hand and left-hand margins. This type of layout is often used for <strong>books</strong>, reports, and other types of <u>long-form documents</u>.</p>
<p>A <code>twoside</code> document has different margins and headers/footers for odd and even pages.</p></li>
</ul>
<p>The layout of a <code>twoside</code> book</p>
<p><img src="https://drive.google.com/thumbnail?id=19v6DluC9hK_CYQVbHv6e_fp_apwa6NrK&amp;sz=w1000" alt="" style="display: block; margin-right: auto; margin-left: auto; zoom:80%;"></p>
<p>Q: Why Inner margin is narrow?<br>
A: The reason for this is that with two pages side by side, you actually have only THREE margins - the left, right and middle. The middle margin is made up from the inside margins of both pages, and so these are smaller because they add together to make the middle margin. If they were bigger, then you would end up with too much whitespace in the middle.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>o <span class="sc">-</span> outside margin</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>i <span class="sc">-</span> inside margin</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>b <span class="sc">-</span> binding offset</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>Before binding<span class="sc">:</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="sc">------------------</span>    <span class="sc">-----------------</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="er">|</span>oooo<span class="sc">|</span><span class="er">~~~~~~|</span>ii<span class="sc">|</span>b<span class="sc">|</span>    <span class="er">|</span> <span class="er">|</span>  <span class="er">|~~~~~~|</span>   <span class="er">|</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="er">|</span>    <span class="er">|~~~~~~|</span>  <span class="er">|</span> <span class="er">|</span>    <span class="er">|</span> <span class="er">|</span>  <span class="er">|~~~~~~|</span>   <span class="er">|</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="er">|</span>    <span class="er">|~~~~~~|</span>  <span class="er">|</span> <span class="er">|</span>    <span class="er">|</span> <span class="er">|</span>  <span class="er">|~~~~~~|</span>   <span class="er">|</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="er">|</span>    <span class="er">|~~~~~~|</span>  <span class="er">|</span> <span class="er">|</span>    <span class="er">|</span> <span class="er">|</span>  <span class="er">|~~~~~~|</span>   <span class="er">|</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="er">|</span>    <span class="er">|~~~~~~|</span>  <span class="er">|</span> <span class="er">|</span>    <span class="er">|</span> <span class="er">|</span>  <span class="er">|~~~~~~|</span>   <span class="er">|</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="er">|</span>    <span class="er">|~~~~~~|</span>  <span class="er">|</span> <span class="er">|</span>    <span class="er">|</span> <span class="er">|</span>  <span class="er">|~~~~~~|</span>   <span class="er">|</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="sc">------------------</span>    <span class="sc">-----------------</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>After binding<span class="sc">:</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="sc">-------------------------------</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="er">|</span>oooo<span class="sc">|</span><span class="er">~~~~~~|</span>ii<span class="sc">|</span>ii<span class="sc">|</span><span class="er">~~~~~~|</span>oooo<span class="sc">|</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="er">|</span>oooo<span class="sc">|</span><span class="er">~~~~~~|</span>ii<span class="sc">|</span>ii<span class="sc">|</span><span class="er">~~~~~~|</span>oooo<span class="sc">|</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="er">|</span>oooo<span class="sc">|</span><span class="er">~~~~~~|</span>ii<span class="sc">|</span>ii<span class="sc">|</span><span class="er">~~~~~~|</span>oooo<span class="sc">|</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="er">|</span>oooo<span class="sc">|</span><span class="er">~~~~~~|</span>ii<span class="sc">|</span>ii<span class="sc">|</span><span class="er">~~~~~~|</span>oooo<span class="sc">|</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="er">|</span>oooo<span class="sc">|</span><span class="er">~~~~~~|</span>ii<span class="sc">|</span>ii<span class="sc">|</span><span class="er">~~~~~~|</span>oooo<span class="sc">|</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="er">|</span>oooo<span class="sc">|</span><span class="er">~~~~~~|</span>ii<span class="sc">|</span>ii<span class="sc">|</span><span class="er">~~~~~~|</span>oooo<span class="sc">|</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="sc">-------------------------------</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><strong><code>landscape</code></strong> - Changes the layout of the document to print in landscape mode.</p></li>
<li><p><strong><code>openright</code>, <code>openany</code></strong> - Makes chapters begin either only on right hand pages or on the next page available. This does not work with the article class, as it does not know about chapters. The report class by default starts chapters on the next page available and the book class starts them on right hand pages.</p></li>
</ul></li>
<li><p>In PDFs, you can use code, typesetting commands (e.g., <code>\vspace{12pt}</code>), and specific packages from LaTeX.</p>
<ol type="1">
<li><p>The <code>header-includes</code> option loads LaTeX packages.</p>
<p>Note that <code>header-includes</code> is a top-level option that align with <code>output</code>.</p></li>
</ol>
<div class="sourceCode" id="cb4"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> pdf_document</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="an">header-includes:</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">  - \usepackage{fancyhdr}</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>\pagestyle{fancy}</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>\fancyhead<span class="co">[</span><span class="ot">LE,RO</span><span class="co">]</span>{Holly Zaharchuk}</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>\fancyhead<span class="co">[</span><span class="ot">LO,RE</span><span class="co">]</span>{PSY 508}</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="fu"># Problem Set 12</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="https://drive.google.com/thumbnail?id=1CNHWeOh7iz_HUh4pBgM99jFzl59csyEC&amp;sz=w1000" alt="latex packages in rmd" style="display: block; margin-right: auto; margin-left: auto; zoom:80%;"></p>
<p><a href="https://github.com/hao203/rmarkdown-YAML?tab=readme-ov-file#header-includes"><strong>Common <code>header-includes</code>:</strong></a></p>
<ul>
<li>Chinese/Japanese support</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> pdf_document</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="an">header-includes:</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">  - \usepackage{ctex}</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="2" type="1">
<li>Alternatively, use <code>extra_dependencies</code> to list a character vector of LaTeX packages. This is useful if you need to load multiple packages:</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Untitled"</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> </span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">  pdf_document:</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co">    extra_dependencies: ["bbm", "threeparttable"]</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you need to specify options when loading the package, you can add a second-level to the list and provide the options as a list:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Untitled"</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> </span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">  pdf_document:</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">    extra_dependencies:</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">      caption: ["labelfont={bf}"]</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">      hyperref: ["unicode=true", "breaklinks=true"]</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">      lmodern: null</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here are some examples of LaTeX packages you could consider using within your report:</p>
<ul>
<li><a href="https://ctan.org/pkg/pdfpages">pdfpages</a>: Include full PDF pages from an external PDF document within your document.</li>
<li><a href="https://ctan.org/pkg/caption">caption</a>: Change the appearance of caption subtitles. For example, you can make the figure title italic or bold.</li>
<li><a href="https://ctan.org/pkg/fancyhdr">fancyhdr</a>: Change the style of running headers of all pages.</li>
</ul></li>
<li><p>Some output options are passed to Pandoc, such as <code>toc</code>, <code>toc_depth</code>, and <code>number_sections</code>. You should consult the <a href="https://pandoc.org/MANUAL.html#variables">Pandoc documentation</a> when in doubt.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">  pdf_document:</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">    keep_tex: true</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><code>keep_tex: true</code> if you want to keep intermediate TeX. Easy to debug. Defaults to <code>false</code>.</li>
</ul>
<p>To learn which arguments a format takes, read the format’s help page in R, e.g.&nbsp;<span style="color:#00CC66"><strong><code>?html_document</code></strong></span>.</p></li>
</ul>
<hr>
<p><strong>Parameters</strong></p>
<p>We can include variables and R expressions in this header that can be referenced throughout our R Markdown document. For example, the following header defines <code>start_date</code> and <code>end_date</code> parameters, which will be reflected in a list called <code>params</code> later in the R Markdown document.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> My RMarkdown</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> Yihui Xie</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> html_document</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="an">params:</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">  start_date: '2020-01-01'</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">  end_date: '2020-06-01'</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To access a parameter in our R code, call <code>params$&lt;parameter name&gt;</code>, e.g., <code>params$start_date</code> and <code>params$end_date</code>.</p>
<p>Should I use quotes to surround the values?</p>
<ul>
<li>Whenever applicable use the unquoted style since it is the most readable.</li>
<li>Use quotes when the value can be misinterpreted as a data type or the value contains a <code>:</code>.</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># values need quotes</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>foo<span class="sc">:</span> <span class="st">'{{ bar }}'</span> <span class="co"># need quotes to avoid interpreting as `dict` object</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>foo<span class="sc">:</span> <span class="st">'123'</span>       <span class="co"># need quote to avoid interpreting as `int` object</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>foo<span class="sc">:</span> <span class="st">'yes'</span>           <span class="co"># avoid interpreting as `boolean` object</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>foo<span class="sc">:</span> <span class="st">"bar:baz:bam"</span> <span class="co"># has colon, can be misinterpreted as key</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co"># values need not quotes</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>foo<span class="sc">:</span> bar1baz234</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>bar<span class="sc">:</span> <span class="dv">123</span>baz</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>ref:</p>
<ul>
<li><a href="https://bookdown.org/yihui/rmarkdown-cookbook/rmarkdown-anatomy.html#:~:text=In%20short%2C%20we%20can%20include%20variables%20and%20R%20expressions%20in%20this%20header%20that%20can%20be%20referenced%20throughout%20our%20R%20Markdown%20document.">R Markdown anatomy, R Markdown Cookbook</a></li>
<li><a href="https://rmarkdown.rstudio.com/lesson-6.html" class="uri">https://rmarkdown.rstudio.com/lesson-6.html</a></li>
</ul>
<hr>
<p><a href="https://rstudio.github.io/visual-markdown-editing/options.html#file-options"><strong>File options</strong></a></p>
<p>Some aspects of markdown output can be customized via global, project, or file-level options, including:</p>
<ul>
<li>How to wrap / break lines (fixed column, sentence-per-line, etc.).</li>
<li>Where to write footnotes (below the current paragraph or section, or at the end of the document).</li>
<li>Whether to use the visual mode markdown writer when saving markdown from source mode (to ensure consistency between documents saved from either mode).</li>
</ul>
<p>Global and project options that affect the way markdown is written can also be customized on a per-file basis. These <em>file specific options</em> can be set using YAML. For instance, you want to set lines wrapping after 72 characters:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="an">editor_options:</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co">  markdown:</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">    wrap: 72</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
<p><a href="https://bookdown.dongzhuoer.com/rstudio/rmarkdown-book/html-document#mathjax-equations"><strong>MathJax Options</strong></a></p>
<p>By default, <a href="https://www.mathjax.org/">MathJax</a> scripts are included in HTML documents for rendering LaTeX and MathML equations. You can use the <code>mathjax</code> option to control how MathJax is included:</p>
<ul>
<li>Specify <code>"default"</code> to use an HTTPS URL from a CDN host (currently provided by RStudio).</li>
<li>Specify <code>"local"</code> to use a local version of MathJax (which is copied into the output directory). Note that when using <code>"local"</code> you also need to set the <code>self_contained</code> option to <code>false</code>.</li>
<li>Specify an alternate URL to load MathJax from another location.</li>
<li>Specify <code>null</code> to exclude MathJax entirely.</li>
</ul>
<p>For example, to use a local copy of MathJax:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Habits"</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">  html_document:</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">    mathjax: local</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">    self_contained: false</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To use a self-hosted copy of MathJax:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Habits"</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">  html_document:</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">    mathjax: "http://example.com/MathJax.js"</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To exclude MathJax entirely:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Habits"</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co">  html_document:</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">    mathjax: null</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
<section id="render-rmd" class="level3">
<h3 class="anchored" data-anchor-id="render-rmd">Render Rmd</h3>
<p>When you click the <code>Knit</code> button (⇧⌘K) in RStudio, generally two processes happen:</p>
<ol type="1">
<li>The <code>.Rmd</code> file is fed to <code>knitr</code>, which executes all of the R code chunks and creates a new markdown (<code>.md</code>) document which includes the R code and its output.</li>
<li>The <code>.md</code> file is then processed by <a href="http://pandoc.org/">pandoc</a> which is responsible for creating the finished format, e.g., HTML, PDF, MS_Word.
<ul>
<li><code>.md</code> files can be directly converted to html, but</li>
<li><code>.md</code> to pdf is time-consuming. It first generates <code>.tex</code>, then call the LaTeX engine to convert to pdf.</li>
</ul></li>
</ol>
<p><img src="https://d33wubrfki0l68.cloudfront.net/61d189fd9cdf955058415d3e1b28dd60e1bd7c9b/9791d/images/rmarkdownflow.png" alt="" style="display: block; margin-right: auto; margin-left: auto; zoom:100%;"></p>
<p>There is one function that can do the processes mentioned above: <a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html"><code>rmarkdown::render</code></a>.</p>
<p><code>rmarkdown::render(input, output_format = NULL, output_file = NULL, output_dir = NULL, output_options = NULL, output_yaml = NULL)</code></p>
<table class="caption-top table">
<colgroup>
<col style="width: 21%">
<col style="width: 78%">
</colgroup>
<thead>
<tr class="header">
<th>Arguments</th>
<th>Definition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>output_format</code></td>
<td>- <code>"all"</code> will render all formats define within the file<br>- Name of a format, e.g., <code>html_document</code>, will render to that single format<br>- An output format object, e.g., <code>html_document(toc = TRUE, toc_depth = 2, includes = includes(before_body = "header.htm"))</code>, where you can pass on the argument</td>
</tr>
<tr class="even">
<td><code>output_options</code></td>
<td>- <strong>List</strong> of output options that can override the options specified in metadata (e.g could be used to force <code>self_contained</code> or <code>mathjax = "local"</code>). <br>- Note that this is <span style="color:#00CC66">only valid when the output format is read from <strong>metadata</strong></span> (i.e.&nbsp;not a custom format object passed to output_format).<br>- <code>output_options</code> cannot work together with <code>xxx_document()</code>.</td>
</tr>
<tr class="odd">
<td><code>output_yaml</code></td>
<td>Paths to YAML files specifying output formats and their configurations. The first existing one is used. If none are found, then the function searches YAML files specified to the <code>output_yaml</code> top-level parameter in the YAML front matter, <code>_output.yml</code> or <code>_output.yaml</code>, and then uses the first existing one.</td>
</tr>
</tbody>
</table>
<p>Use examples of <code>render</code>, using <strong>output format objects</strong></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">render</span>(<span class="st">"0208-Rmd-GHpage.Rmd"</span>, </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    bookdown<span class="sc">::</span><span class="fu">pdf_document2</span>(</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">latex_engine =</span> <span class="st">"xelatex"</span>,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>        <span class="co"># template = "latex/template.tex",</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">includes =</span> rmarkdown<span class="sc">::</span><span class="fu">includes</span>(</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">in_header =</span> <span class="st">"latex/preamble.tex"</span>,</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">before_body =</span> <span class="st">"latex/before_body.tex"</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>        ))</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co"># This does NOT work as `output_options` is only valid when the format is not an output format object "xxx_document()"</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">render</span>(<span class="st">"0208-Rmd-GHpage.Rmd"</span>, </span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    bookdown<span class="sc">::</span><span class="fu">pdf_document2</span>(</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">latex_engine =</span> <span class="st">"xelatex"</span>,</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>        <span class="co"># template = "latex/template.tex"), </span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">output_options =</span> <span class="fu">list</span>(</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">includes =</span> rmarkdown<span class="sc">::</span><span class="fu">includes</span>(</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">in_header =</span> <span class="st">"latex/preamble.tex"</span>,</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">before_body =</span> <span class="st">"latex/before_body.tex"</span>)</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>        ))</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a><span class="co"># render to html</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">render</span>(<span class="st">"0304-Quarto.Rmd"</span>,  </span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>    bookdown<span class="sc">::</span><span class="fu">html_document2</span>(</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">includes =</span> rmarkdown<span class="sc">::</span><span class="fu">includes</span>(</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>            <span class="at">in_header =</span> <span class="st">"head.html"</span>,</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>            <span class="at">before_body =</span> <span class="st">"scripts.html"</span>)</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>        ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that sometimes the bookdown cross references in Rmd are not rendered when using the <code>Knit</code> button. The rendered html shows <code>Fig. \@ref(fig:ar-res)</code> (without the backslash). In this case, using <code>rmarkdown::render()</code> <strong>with <code>output_format = bookdown::html_document2()</code></strong> might help.</p>
<hr>
<p>You can have more than one output formats for your Rmd. For example, you want both the html and pdf output.</p>
<p>When you render the Rmd with <code>rmarkdown::render()</code>, it will use the <strong>first output format you specify in the YAML metadata</strong> (if it is missing, the default is <code>html_document</code>).</p>
<p>If you do not want to use the first one, you can specify the one you want in the second argument, e.g., for an Rmd document <code>input.Rmd</code> with the metadata:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pdf_document</span><span class="kw">:</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">keep_tex</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can render it to PDF via:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Render to pdf</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">render</span>(<span class="st">'input.Rmd'</span>, <span class="st">'pdf_document'</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Render multiple formats</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">render</span>(<span class="st">"input.Rmd"</span>, <span class="fu">c</span>(<span class="st">"html_document"</span>, <span class="st">"pdf_document"</span>))</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Render all formats defined</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">render</span>(<span class="st">'input.Rmd'</span>, <span class="st">'all'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><p>RStudio calls the function <code>rmarkdown::render()</code> to render the document in <strong>a new R session</strong>.</p>
<p>RStudio does this to ensure <strong>reproducibility</strong>.</p></li>
</ul>
<hr>
<p><a href="https://pkgs.rstudio.com/rmarkdown/reference/render_site.html"><code>rmarkdown::render_site(input = ".", output_format = "all",)</code></a> Render all of the R Markdown documents within a directory as a website. There are two requirements for a directory to be rendered as a website:</p>
<ul>
<li>It must contain either an <code>index.Rmd</code> or <code>index.md</code> file.</li>
<li>It must contain a site configuration file (<code>_site.yml</code>).</li>
</ul>
<p>Note that the “Knit” button in RStudio uses <code>rmarkdown::render_site</code> to knit the file in presence of an <code>index.Rmd</code> file in the working directory.</p>
<hr>
</section>
<section id="document-dependency" class="level3">
<h3 class="anchored" data-anchor-id="document-dependency">Document dependency</h3>
<p>By default, R Markdown produces standalone HTML files with no external dependencies, using <code>data:</code>URIs to incorporate the contents of linked scripts, stylesheets, images, and videos. This means you can share or publish the file just like you share Office documents or PDFs. If you would rather keep dependencies in external files, you can specify <code>self_contained: false</code>.</p>
<p>Note that even for self-contained documents, MathJax is still loaded externally (this is necessary because of its big size). If you want to serve MathJax locally, you should specify <code>mathjax: local</code> and <code>self_contained: false</code>.</p>
<p>One common reason to keep dependencies external is for serving R Markdown documents from a website (external dependencies can be cached separately by browsers, leading to faster page load times). In the case of serving multiple R Markdown documents you may also want to consolidate dependent library files (e.g.&nbsp;Bootstrap, and MathJax, etc.) into a single directory shared by multiple documents. You can use the <code>lib_dir</code> option to do this. For example:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Habits"</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co">  html_document:</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co">    self_contained: false</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co">    lib_dir: libs</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
<section id="loading-latex-packages" class="level3 unlisted unnumbered">
<h3 class="unlisted unnumbered anchored" data-anchor-id="loading-latex-packages">Loading LaTeX packages</h3>
<p>We can load additional LaTeX packages using the <a href="https://bookdown.org/yihui/rmarkdown-cookbook/latex-extra.html"><code>extra_dependencies</code></a> option <span style="color:#00CC66"><strong>within</strong> the <code>pdf_document</code></span> YAML settings.</p>
<p>This allows us to provide a list of LaTeX packages to be loaded in the intermediate LaTeX output document, e.g.,</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Using more LaTeX packages"</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> </span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co">  pdf_document:</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co">    extra_dependencies: ["bbm", "threeparttable"]</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you need to <strong>specify options</strong> when loading the package, you can add a sub-level to the list and provide the options as a list, e.g.,</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pdf_document</span><span class="kw">:</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">extra_dependencies</span><span class="kw">:</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">caption</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">"labelfont={bf}"</span><span class="kw">]</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">hyperref</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">"unicode=true"</span><span class="kw">,</span><span class="at"> </span><span class="st">"breaklinks=true"</span><span class="kw">]</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">lmodern</span><span class="kw">:</span><span class="at"> </span><span class="ch">null</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For those familiar with LaTeX, this is equivalent to the following LaTeX code:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode latex code-with-copy"><code class="sourceCode latex"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>[labelfont={bf}]{<span class="ex">caption</span>} </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>[unicode=true, breaklinks=true]{<span class="ex">hyperref</span>}</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">lmodern</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The advantage of using the <code>extra_dependencies</code> argument over the <code>includes</code> argument introduced in Section <a href="https://bookdown.org/yihui/rmarkdown-cookbook/latex-preamble.html#latex-preamble">6.1</a> is that you do not need to include an external file, so your Rmd document can be <strong>self-contained</strong>.</p>
<hr>
</section>
<section id="includes" class="level3 unlisted unnumbered">
<h3 class="unlisted unnumbered anchored" data-anchor-id="includes">Includes</h3>
<section id="html-output" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="html-output">HTML Output</h4>
<p>You can do more advanced customization of output by including additional HTML content or by replacing the core Pandoc template entirely. To include content in the document header or before/after the document body, you use the <code>includes</code> option as follows:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Habits"</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co">  html_document:</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co">    includes:</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co">      in_header: header.html   # inject CSS and JavaScript code into the &lt;head&gt; tag</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co">      before_body: doc_prefix.html  # include a header that shows a banner or logo.</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co">      after_body: doc_suffix.html  # include a footer</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co">  template: template.html  # custom templates</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>An example <code>header.html</code> to load a MathJax extension <code>textmacros</code>.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> type=</span><span class="st">"text/x-mathjax-config"</span><span class="dt">&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  MathJax<span class="op">.</span><span class="at">Hub</span><span class="op">.</span><span class="fu">Config</span>({ </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">loader</span><span class="op">:</span> {<span class="dt">load</span><span class="op">:</span> [<span class="st">'[tex]/textmacros'</span>]}<span class="op">,</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tex</span><span class="op">:</span> {<span class="dt">packages</span><span class="op">:</span> {<span class="st">'[+]'</span><span class="op">:</span> [<span class="st">'textmacros'</span>]}}</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
<section id="pdf-output" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="pdf-output">PDF Output</h4>
<p>For example, to support Chinese characters.</p>
<p>You can use <code>includes</code> and <code>preamble.tex</code> (can be any name, contains any pre-loaded latex code you want to run before your main text code, for setting up environment, loading pkgs, define new commands … Very flexible.)</p>
<p>In the main Rmd:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co">  pdf_document:</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co">    includes:</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co">      in_header: latex/preamble.tex</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co">      before_body: latex/before_body.tex</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co">      after_body: latex/after_body.tex</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you want to add anything to the preamble, you have to use the <code>includes</code> option of <code>pdf_document</code>. This option has three sub-options:</p>
<ul>
<li><p><code>in_header</code>: loading necessary packages</p></li>
<li><p><code>before_body</code>:</p>
<ul>
<li>Styling that has the highest priority (as it will be loaded latest; if you put in <code>in_header</code>, it might be overridden by default settings)</li>
<li>Dedication page like “The books is dedicated to …” (此书献给…)</li>
</ul>
<p>An example of <code>before_body.tex</code>:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode latex code-with-copy"><code class="sourceCode latex"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">% Styling that has the highest priority</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">\let\tightlist\relax</span> <span class="co">% disable `\tightlist`</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setlength</span>{<span class="fu">\abovedisplayskip</span>}{-5pt}</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">\setlength</span>{<span class="fu">\abovedisplayshortskip</span>}{-5pt}</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co">% book dedication page</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="fu">\thispagestyle</span>{empty}</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">center</span>}</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>献给……</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>呃，爱谁谁吧</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">center</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The default bookdown uses <span style="color:#FF9900"><strong><code>\tightlist</code></strong></span> for all bullet lists, setting <code>itemsep=0pt</code> and <code>parskip=0pt</code>, aim for “compact lists.” See the following definition:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>\providecommand{\tightlist}{%</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>\setlength{\itemsep}{<span class="dv">0</span>pt}\setlength{\parskip}{<span class="dv">0</span>pt}}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I personally don’t like the compact list setting, so I disable it with <code>\let\tightlist\relax</code>. To prevent it from being overridden, I put it in <code>before_body.tex</code> instead of <code>preamble.tex</code>.</p></li>
<li><p><code>after_body</code>.</p></li>
</ul>
<p>Each of them takes one or multiple file paths. The file(s) specified in <code>in_header</code> will be added to the preamble. The files specified in <code>before_body</code> and <code>after_body</code> are added before and after the document body, respectively.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode latex code-with-copy"><code class="sourceCode latex"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co">% preamble</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co">% before_body</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co">% body</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co">% after_body</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="images/preamble.png" alt="" style="display: block; margin-right: auto; margin-left: auto; zoom:40%;"></p>
<p>In <code>preamble.tex</code>:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode latex code-with-copy"><code class="sourceCode latex"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">xeCJK</span>}  </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">\setCJKmainfont</span>{Noto Sans CJK SC}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Alternatively</strong>, you can use <code>header-includes</code> but with less flexibility to change options:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> pdf_document</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="an">header-includes:</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co">  - \usepackage{ctex}</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Q: <code>includes</code> vs.&nbsp;<code>header-includes</code>, which one is better to use for loading LaTeX packages?</p>
<p>A: Another way to add code to the preamble is to pass it directly to the <code>header-includes</code> field in the YAML frontmatter. The advantage of using <code>header-includes</code>is that you can keep everything in one R Markdown document.</p>
<p>However, if your report is to be generated in <em>multiple output formats</em>, we still recommend that you <strong>use the <code>includes</code> method</strong>, because the <code>header-includes</code> field is unconditional, and will be included in non-LaTeX output documents, too. By comparison, the <code>includes</code> option is only applied to the <code>pdf_document</code> format.</p>
<p>Ref:</p>
<p><a href="https://github.com/hao203/rmarkdown-YAML?tab=readme-ov-file#chinesejapanese-support" class="uri">https://github.com/hao203/rmarkdown-YAML?tab=readme-ov-file#chinesejapanese-support</a></p>
<p><a href="https://bookdown.org/yihui/rmarkdown-cookbook/latex-preamble.html" class="uri">https://bookdown.org/yihui/rmarkdown-cookbook/latex-preamble.html</a></p>
<hr>
</section>
<section id="header-includes" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="header-includes"><code>header-includes</code></h4>
<p>Tex style and package loading can also put in <code>header-includes</code>.</p>
<p>Ex.1</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> pdf_document</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="an">header-includes:</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co"> - \usepackage{fancyhdr}</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"> - \pagestyle{fancy}</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="co"> - \usepackage{ctex} #TeX package for  Chinese</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="co"> - \fancyhead[L]{MANUSCRIPT AUTHORS}</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="co"> - \fancyhead[R]{MANUSCRIPT SHORT TITLE}</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="co"> - \usepackage{lineno} # TeX package for line numbers</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="co"> - \linenumbers</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Ex.2</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> Adding a Logo to LaTeX Title</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> Michael Harper</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> December 7th, 2018</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> pdf_document</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="an">header-includes:</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co">  - \usepackage{titling}</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="co">  - \pretitle{\begin{center}</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="co">    \includegraphics[width=2in,height=2in]{logo.jpg}\LARGE\\}</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="co">  - \posttitle{\end{center}}</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Ex.3</p>
<p>To override or extend some CSS for just one document, include for example:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> html_document</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="an">header-includes:</span><span class="co"> |</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co">  &lt;style&gt;</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="co">  blockquote {</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="co">    font-style: italic;</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="co">  }</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="co">  tr.even {</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="co">    background-color: #f0f0f0;</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="co">  }</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="co">  td, th {</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="co">    padding: 0.5em 2em 0.5em 0.5em;</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a><span class="co">  }</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a><span class="co">  tbody {</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="co">    border-bottom: none;</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a><span class="co">  }</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a><span class="co">  &lt;/style&gt;</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
</section>
<section id="change-font" class="level3 unlisted unnumbered">
<h3 class="unlisted unnumbered anchored" data-anchor-id="change-font">Change Font</h3>
<p>The default font is <code>\usepackage{lmodern}</code> in bookdown.</p>
<p>Can specify alternative fonts in <code>preamble.tex</code> as follows:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode latex code-with-copy"><code class="sourceCode latex"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Charter}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Fonts known to LuaTeX or XeTEX may be loaded by their standard names as you’d speak them out loud, such as Times New Roman or Adobe Garamond. ‘Known to’ in this case generally means ‘exists in a standard fonts location’ such as <code>~/Library/Fonts</code> on macOS, or <code>C:\Windows\Fonts</code> on Windows. In LuaTEX, fonts found in the TEXMF tree can also be loaded by name. In XeTEX, fonts found in the TEXMF tree can be loaded in Windows and Linux, but not on macOS.</p>
<hr>
</section>
</section>
<section id="chunk-options" class="level2">
<h2 class="anchored" data-anchor-id="chunk-options">Chunk Options</h2>
<p>If you want to <strong>set chunk options globally</strong>, call <code>knitr::opts_chunk$set()</code> in a code chunk (usually the first one in the document), e.g.,</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode md code-with-copy"><code class="sourceCode markdown"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, label="setup", include=FALSE}</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">comment =</span> <span class="st">"#&gt;"</span>, </span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">echo =</span> <span class="cn">FALSE</span>, </span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">fig.width =</span> <span class="dv">6</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Chunk options are written in the form <code>tag=value</code>. A special chunk option is the chunk label (e.g., <code>setup</code> in the above example). Only the chunk label does not need a tag (i.e., you can only provide the value). If you prefer the form <code>tag=value</code>, you could also use the chunk option label explicitly, e.g., <code>label="setup"</code>.</p>
<p>The settings will apply to every chunk in your file as a default. You can overwrite them in individual chunk headers.</p>
<p>Full list of chunk options: <a href="https://yihui.org/knitr/options/" class="uri">https://yihui.org/knitr/options/</a></p>
<p>Chunk options can customize nearly all components of code chunks, such as the source code, text output, plots, and the language of the chunk.</p>
<p><strong>Other languages are supported in <code>Rmd</code></strong></p>
<p>You can list the names of all available engines via:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(knitr<span class="sc">::</span>knit_engines<span class="sc">$</span><span class="fu">get</span>())</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "awk"          "bash"         "coffee"      </span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  [4] "gawk"         "groovy"       "haskell"     </span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  [7] "lein"         "mysql"        "node"        </span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [10] "octave"       "perl"         "php"         </span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [13] "psql"         "Rscript"      "ruby"        </span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [16] "sas"          "scala"        "sed"         </span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [19] "sh"           "stata"        "zsh"         </span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [22] "asis"         "asy"          "block"       </span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [25] "block2"       "bslib"        "c"           </span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [28] "cat"          "cc"           "comment"     </span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [31] "css"          "ditaa"        "dot"         </span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [34] "embed"        "eviews"       "exec"        </span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [37] "fortran"      "fortran95"    "go"          </span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="do">## [40] "highlight"    "js"           "julia"       </span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="do">## [43] "python"       "R"            "Rcpp"        </span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [46] "sass"         "scss"         "sql"         </span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a><span class="do">## [49] "stan"         "targets"      "tikz"        </span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a><span class="do">## [52] "verbatim"     "theorem"      "lemma"       </span></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a><span class="do">## [55] "corollary"    "proposition"  "conjecture"  </span></span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a><span class="do">## [58] "definition"   "example"      "exercise"    </span></span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a><span class="do">## [61] "hypothesis"   "proof"        "remark"      </span></span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a><span class="do">## [64] "solution"     "marginfigure"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The engines from <code>theorem</code> to <code>solution</code> are only available when you use the <strong>bookdown</strong> package, and the rest are shipped with the <strong>knitr</strong> package.</p>
<p>To use a different language engine, you can change the language name in the chunk header from <code>r</code> to the engine name, e.g.,</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">python</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="at">x = 'hello, python world!'</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="at">print(x.split(' '))</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For engines that rely on external interpreters such as <code>python</code>, <code>perl</code>, and <code>ruby</code>, the default interpreters are obtained from <code>Sys.which()</code>, i.e., using the interpreter found via the environment variable <code>PATH</code> of the system. If you want to use an alternative interpreter, you may specify its path in the chunk option <code>engine.path</code>.</p>
<p>For example, you may want to use Python 3 instead of the default Python 2, and we assume Python 3 is at <code>/usr/bin/python3</code></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode md code-with-copy"><code class="sourceCode markdown"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{python, engine.path = '/usr/bin/python3'}</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sys.version)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>All outputs support markdown syntax.</li>
<li>If the output is html, you can write in html syntax.</li>
</ul>
<p>The <strong>chunk label</strong> for each chunk is assumed to be unique within the document. This is especially important for cache and plot filenames, because these filenames are based on chunk labels. Chunks without labels will be assigned labels like <code>unnamed-chunk-i</code>, where <code>i</code> is an incremental number.</p>
<ul>
<li><p>Chunk label doesn’t need a <code>tag</code>, i.e., you only provide the <code>value</code>.</p></li>
<li><p>If you prefer the form <code>tag=value</code>, you could also use the chunk option <code>label</code> explicitly, e.g.,</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode md code-with-copy"><code class="sourceCode markdown"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, label='my-chunk'}</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co"># one code chunk example</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
<p>You may use <code>knitr::opts_chunk$set()</code> to change the default values of chunk options in a document.</p>
<p><strong>Commonly used chunk options</strong></p>
<ul>
<li>Complete list <a href="https://yihui.org/knitr/options/">here</a>. Or <code>?opts_chunk</code> to get the help page.</li>
</ul>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 75%">
</colgroup>
<thead>
<tr class="header">
<th>Options</th>
<th>Definitions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>echo=TRUE</code></td>
<td>Whether to display the <strong>source code</strong> in the output document.<br>Use this when you want to show the output but NOT the source code itself.</td>
</tr>
<tr class="even">
<td><code>eval=TRUE</code></td>
<td>Whether to evaluate the code chunk.</td>
</tr>
<tr class="odd">
<td><code>include=TRUE</code></td>
<td>Whether to include the <span style="color:#32CD32">chunk <strong>code and output</strong></span> in the output document—including source code, text output, messages, warnings, and plots. <br>If <code>FALSE</code>, nothing will be written into the output document, but the code is <u>still evaluated</u> and plot files are generated if there are any plots in the chunk, so you can manually insert figures later.</td>
</tr>
<tr class="even">
<td><code>message=TRUE</code></td>
<td>Whether to preserve messages emitted by <code>message()</code></td>
</tr>
<tr class="odd">
<td><code>warning=TRUE</code></td>
<td>Whether to show warnings in the output produced by <code>warning()</code>.</td>
</tr>
<tr class="even">
<td><code>results='markup'</code></td>
<td>Controls how to display the text results. <br>When <code>results='markup'</code> that is to write text output as-is, i.e., write the raw text results directly into the output document without any markups.<br>Useful when priting <code>stargazer</code> tables.</td>
</tr>
<tr class="odd">
<td><code>comment='##'</code></td>
<td>The prefix to be added before each line of the text output. <br>Set <code>comment = ''</code> remove the default <code>##</code>.</td>
</tr>
<tr class="even">
<td><code>collapse=FALSE</code></td>
<td>Whether to, if possible, collapse all the source and output blocks from one code chunk into a single block (by default, they are written to separate blocks). <br>This option only applies to Markdown documents.</td>
</tr>
<tr class="odd">
<td><code>fig.keep='high'</code></td>
<td>How plots in chunks should be kept. <br><code>high</code>: Only keep high-level plots (merge low-level changes into high-level plots). <br><code>none</code>: Discard all plots. <br><code>all</code>: Keep all plots (low-level plot changes may produce new plots). <br><code>first</code>: Only keep the first plot. <br><code>last</code>: Only keep the last plot. <br>If set to a numeric vector, the values are indices of (low-level) plots to keep.<br>If you want to choose the second to the fourth plots, you could use <code>fig.keep = 2:4</code> (or remove the first plot via <code>fig.keep = -1</code>).</td>
</tr>
<tr class="even">
<td><code>fig.align="center"</code></td>
<td>Figure alignment.</td>
</tr>
<tr class="odd">
<td><code>fig.pos="H"</code></td>
<td>A character string for the figure position arrangement to be used in <code>\begin{figure}[]</code>.</td>
</tr>
<tr class="even">
<td><code>fig.cap</code></td>
<td>Figure caption.</td>
</tr>
</tbody>
</table>
<p><span style="color:#32CD32"><code>results='markup'</code></span> note plural form for result<strong>s</strong>.</p>
<ul>
<li><p><code>results='markup'</code>: Default. Mark up text output with the appropriate environments depending on the output format. For example, for R Markdown, if the text output is a character string <code>"[1] 1 2 3"</code>, the actual output that <strong>knitr</strong> produces will be:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="at">[1] 1 2 3</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this case, <code>results='markup'</code> means to put the text output in fenced code blocks (```).</p></li>
<li><p><code>results='asus'</code>: Write text output as-is, i.e., write the raw text results directly into the output document without any markups.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode md code-with-copy"><code class="sourceCode markdown"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, results='asis'}</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"I'm raw **Markdown** content.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Sometime, you encounter the following error messages when you have R codes within <code>enumerate</code> environment.</p>
<blockquote class="blockquote">
<p>You can’t use <code>macro parameter character #</code> in horizontal mode.</p>
</blockquote>
<p>By default, knitr prefixes R output with <code>##</code>, which can’t be present in your TeX file.</p>
<p>Solution:</p>
<ul>
<li>specify <code>results="asis"</code> in code chunks.</li>
</ul></li>
<li><p><code>results='hold'</code>: Hold all pieces of text output in a chunk and flush them to the end of the chunk.</p></li>
<li><p><code>results='hide'</code> (or <code>results='FALSE'</code>): Hide text output.</p></li>
</ul>
<hr>
<p><code>collapse = FALSE</code> Whether to merge text output and source code into a single code block in the output. The default <code>FALSE</code> means R expressions and their text output are separated into different blocks.</p>
<p><code>collapse = TRUE</code> makes the output more compact, since the R source code and its text output are displayed in a single output block. The default <code>collapse = FALSE</code> means R expressions and their text output are separated into different blocks.</p>
<hr>
<section id="hooks" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="hooks">Hooks</h3>
<p>The object <code>knit_hooks</code> in the <strong>knitr</strong> package is used to set hooks; the basic usage is <code>knitr::knit_hooks$set(name = FUN)</code> (see <a href="https://yihui.org/knitr/objects/">objects</a> for details) where <code>name</code> is the name of a chunk option (can be arbitrary), and <code>FUN</code> is a function.</p>
<p>There are two types of hooks:</p>
<ul>
<li><p>chunk hooks and</p>
<p>A chunk hook is a function that is <u>triggered by a chunk option</u> when the value of this chunk option is not <code>NULL</code>.</p></li>
<li><p>output hooks</p>
<p>Output hooks control over output from your code chunks, such as source code, text output, messages, and plots.</p></li>
</ul>
<p>Hook functions may have different forms, depending what they are designed to do.</p>
<p><strong>Chunk hooks</strong></p>
<p>For example, we define a <strong>custom chunk hook</strong> function for the <code>small_mar</code> option</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>knit_hooks<span class="sc">$</span><span class="fu">set</span>(<span class="at">small_mar =</span> <span class="cf">function</span>(before, ...) {</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (before)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, .<span class="dv">1</span>, .<span class="dv">1</span>))  <span class="co"># smaller top/right margin</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then this function will be called for a chunk option like the following (<code>small_mar</code> doesn’t have to be <code>TRUE</code>; it can be any non-<code>NULL</code> value):</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r, myplot, small_mar=TRUE}</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="at">hist(rnorm(100), main = '')</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
<p><strong>Output hooks</strong></p>
<p>With the <strong>knitr</strong> package, you have control over every piece of output from your code chunks, such as source code, text output, messages, and plots. The control is achieved through “output hooks.”</p>
<p>Available output hook names:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(knitr<span class="sc">:::</span>.default.hooks)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "source"          "output"          "warning"         "message"        
 [5] "error"           "plot"            "inline"          "chunk"          
 [9] "text"            "evaluate.inline" "evaluate"        "document"       </code></pre>
</div>
</div>
<p>Note that these names of output hooks are reserved by <strong>knitr</strong>, so you must NOT use these names for your custom chunk hooks.</p>
<ul>
<li><code>source</code>: processing the source code.</li>
<li><code>output</code>: processing text output.</li>
</ul>
<p>You may obtain the actual hooks from the object <code>knit_hooks</code> via the <code>get()</code> method, e.g.,</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># for meaningful output, the code below should be</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="co"># executed *inside* a code chunk of a knitr document</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>knit_hooks<span class="sc">$</span><span class="fu">get</span>(<span class="st">"source"</span>)</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>knit_hooks<span class="sc">$</span><span class="fu">get</span>(<span class="st">"output"</span>)</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co"># or knitr::knit_hooks$get(c('source', 'output'))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A custom output hook is registered through the <code>set()</code> method of <code>knit_hooks</code>. Because this method will override the existing default hook, we recommend that you save a copy of an existing hook, process the output elements in your own way, and pass the results to the default hook.</p>
<p>When the text output from a code chunk is lengthy, you may want to only show the first few lines. For example, when printing a data frame of a few thousand rows, it may not be helpful to show the full data, and the first few lines may be enough. Below we redefine the <code>output</code> hook so that we can control the maximum number of lines via a custom chunk option <code>out.lines</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># save the built-in output hook</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>hook_output <span class="ot">&lt;-</span> knitr<span class="sc">::</span>knit_hooks<span class="sc">$</span><span class="fu">get</span>(<span class="st">"output"</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co"># set a new output hook to truncate text output</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>knit_hooks<span class="sc">$</span><span class="fu">set</span>(<span class="at">output =</span> <span class="cf">function</span>(x, options) {</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(n <span class="ot">&lt;-</span> options<span class="sc">$</span>out.lines)) {</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> xfun<span class="sc">::</span><span class="fu">split_lines</span>(x)</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(x) <span class="sc">&gt;</span> n) {</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>      <span class="co"># truncate the output</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>      x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">head</span>(x, n), <span class="st">"....</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> <span class="fu">paste</span>(x, <span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hook_output</span>(x, options)</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The basic idea of the above hook function is that if the number of lines of the text output is greater than the threshold set in the chunk option <code>out.lines</code> (stored in the variable <code>n</code> in the function body), we only keep the first <code>n</code> lines and add an ellipsis (<code>....</code>) to indicate the output is truncated.</p>
<p>Now we can test the new <code>output</code> hook by setting the chunk option <code>out.lines = 4</code> on the chunk below:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r out.lines = 4}</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cars)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell" data-out.lines="4">
<div class="cell-output cell-output-stdout">
<pre><code>   speed dist
1      4    2
2      4   10
3      7    4
....</code></pre>
</div>
</div>
<p>And you see four lines of output as expected.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(cars, <span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   speed dist
1      4    2
2      4   10
3      7    4
4      7   22
5      8   16
6      9   10
7     10   18
8     10   26
9     10   34
10    11   17</code></pre>
</div>
</div>
<p>Since we have stored the original <code>output</code> hook in <code>hook_output</code>, we can restore it by calling the <code>set()</code> method again:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>knit_hooks<span class="sc">$</span><span class="fu">set</span>(<span class="at">output =</span> hook_output)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we print the data frame again. The default behavior is to print the whole data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(cars, <span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   speed dist
1      4    2
2      4   10
3      7    4
4      7   22
5      8   16
6      9   10
7     10   18
8     10   26
9     10   34
10    11   17</code></pre>
</div>
</div>
<p>References:</p>
<ul>
<li>Output hooks: <a href="https://bookdown.org/yihui/rmarkdown-cookbook/output-hooks.html" class="uri">https://bookdown.org/yihui/rmarkdown-cookbook/output-hooks.html</a></li>
<li>Chunk hooks: <a href="https://bookdown.org/yihui/rmarkdown-cookbook/chunk-hooks.html" class="uri">https://bookdown.org/yihui/rmarkdown-cookbook/chunk-hooks.html</a></li>
</ul>
<hr>
</section>
</section>
<section id="print-verbatim-r-code-chunks" class="level2">
<h2 class="anchored" data-anchor-id="print-verbatim-r-code-chunks">Print Verbatim R code chunks</h2>
<p><strong>verbatim in line code</strong></p>
<ul>
<li>use <code>knitr::inline_expr</code>.</li>
</ul>
<div class="sourceCode" id="cb54"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Test inline expr"</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> html_document</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>To use <span class="in">`chunk_reveal("walrus", title = "## Walrus operator")`</span> inline, you can wrap it in R inline chunk like this `<span class="in">` `</span>r chunk_reveal("walrus", title = "## Walrus operator")` ``</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Including verbatim R code chunks inside R Markdown</strong></p>
<p>One solution for including verbatim R code chunks (see below for more) is to insert hidden inline R code (<code>`r   ''`</code>) immediately <u>before or after</u> your R code chunk.</p>
<ul>
<li>The hidden inline R code will be evaluated as an inline expression to an empty string by knitr.</li>
</ul>
<p>Then wrap the whole block within a markdown code block. The rendered output will display the verbatim R code chunk — including backticks.</p>
<p>R code generating the four backticks block:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>output_code <span class="ot">&lt;-</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="st">"````markdown</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="st">```{r}</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="st">plot(cars)</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="st">``` </span><span class="sc">\n</span><span class="st">````"</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(output_code)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Write this code in your R Markdown document:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>output_code <span class="ot">&lt;-</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="st">"````markdown</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="st">`r ''````{r}</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="st">plot(cars)</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="st">``` </span><span class="sc">\n</span><span class="st">````"</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(output_code)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>````markdown
`r ''````{r}
plot(cars)
``` 
````</code></pre>
</div>
</div>
<p>or</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>output_code <span class="ot">&lt;-</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="st">"````markdown</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="st">```{r}`r ''`</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="st">plot(cars)</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="st">``` </span><span class="sc">\n</span><span class="st">````"</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(output_code)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>````markdown
```{r}`r ''`
plot(cars)
``` 
````</code></pre>
</div>
</div>
<p>Knit the document and the code will render like this in your output:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cars)</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This method makes use of <strong>Markdown Syntax</strong> for code.</p>
<p>Q: What is the Markdown Syntax for code?<br>
A:</p>
<ul>
<li><p>Inline code use a pair of backticks, e.g., <code>`code`</code>. To use <span class="math inline">\(n\)</span> literal backticks, use at least <span class="math inline">\(n+1\)</span> backticks outside. Note that use a space to separate your outside backticks from your literal backtick(s). For example, to generate <code>`code`</code>, you use <code>``␣`code`␣``</code> (i.e., two backticks + space + one backtick + <code>code</code> + one backtick + space + two backticks). Note that you need to write sequentially.</p></li>
<li><p>Plain code blocks can be written either</p>
<ul>
<li><p>After <u>three or more</u> backticks (fenced code blocks), or</p>
<p>Can also use tildes (<code>~</code>)</p></li>
<li><p>Indent the blocks by four spaces (indented code blocks)</p>
<p>Special characters do not trigger special formatting, and all spaces and line breaks are preserved. Blank lines in the verbatim text need not begin with four spaces.</p></li>
</ul></li>
<li><p>Note that code blocks must be <u>separated from surrounding text by blank lines</u>.</p></li>
</ul>
<p>If the code itself contains a row of tildes or backticks, just use a longer row of tildes or backticks at the start and end:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode md code-with-copy"><code class="sourceCode markdown"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="in">~~~~~~~~~~~~~~~~</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="in">~~~~~~~~~~</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="in">code including tildes</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="in">~~~~~~~~~~</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="in">~~~~~~~~~~~~~~~~</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>These begin with a row of three or more tildes (<code>~</code>) and end with a row of tildes that must be at least as long as the starting row.</p>
<p>A trick if you don’t want to type more than three tildes or backticks is that you just use different inner and outer symbols.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode md code-with-copy"><code class="sourceCode markdown"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="in">~~~markdown</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span> (<span class="st">"hello world"</span>)</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="in">~~~</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Will be rendered as:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span> (<span class="st">"hello world"</span>)</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
<p>A shortcut form (without braces) can also be used for specifying the language of the code block:</p>
<pre><code>```haskell
qsort [] = []
```</code></pre>
<p>This is equivalent to:</p>
<pre><code>``` {.haskell}
qsort [] = []
```</code></pre>
<p><code>haskell</code> is the language class.</p>
<p>You can add more classes, such as <code>numberLines</code> for adding line numbers.</p>
<p>This shortcut form may be combined with attributes:</p>
<pre><code>```haskell {.numberLines}
qsort [] = []
```</code></pre>
<p>Which is equivalent to:</p>
<pre><code>``` {.haskell .numberLines}
qsort [] = []
```</code></pre>
<p>and</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">pre</span><span class="ot"> id</span><span class="op">=</span><span class="st">"mycode"</span><span class="ot"> class</span><span class="op">=</span><span class="st">"haskell numberLines"</span><span class="ot"> startFrom</span><span class="op">=</span><span class="st">"100"</span><span class="dt">&gt;</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">code</span><span class="dt">&gt;</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  primes = filterPrime [2..] where</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  filterPrime (p:xs) =</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>    p : filterPrime [x | x <span class="er">&lt;</span>- xs, x `mod` p /= 0]</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">code</span><span class="dt">&gt;</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">pre</span><span class="dt">&gt;</span>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If highlighting is supported for your output format and language, then the code block above will appear highlighted, with <a href="https://bookdown.org/yihui/rmarkdown-cookbook/number-lines.html">numbered lines</a> starting with 100, 101, and go on.</p>
<pre id="mycode" class="haskell numberLines" startfrom="100">  <code>
  primes = filterPrime [2..] where
  filterPrime (p:xs) =
    p : filterPrime [x | x &lt;- xs, x `mod` p /= 0]
  </code>
</pre>
<hr>
<p><strong>Code chunks within <code>enumerate</code></strong></p>
<ul>
<li><p>Mind the indentation. Rstudio does not automatically adjust indentation for codes.</p></li>
<li><p>specify <code>results="asis"</code> if encounter</p>
<blockquote class="blockquote">
<p>You can’t use `macro parameter character #’ in horizontal mode.</p>
</blockquote></li>
<li><p>cross references using bookdown (<code>\@ref{fig:scatter-plot}</code>) might not work.</p>
<p>Use latex references <code>\ref{fig:scatter-plot}</code> (base latex) or <code>\autoref{fig:scatter-plot}</code> (from <code>hyperref</code> package)</p></li>
<li><p>markdown language does not work well inside latex environments. A possible workaround is use <code>1</code> and indent four spaces for contents that follow.</p></li>
</ul>
<p>If it is still a pain in the ass, use <a href="https://tex.stackexchange.com/a/594904">this solution</a>.</p>
<p>Basically, just copy the output from R condole and paste in Rmd.</p>
<hr>
<p><strong>References</strong>:</p>
<p>https://yihui.org/en/2017/11/knitr-verbatim-code-chunk/</p>
<p>https://support.posit.co/hc/en-us/articles/360018181633-Including-verbatim-R-code-chunks-inside-R-Markdown</p>
<p>https://themockup.blog/posts/2021-08-27-displaying-verbatim-code-chunks-in-xaringan-presentations/</p>
<p>Pandoc’s Markdown: <a href="https://pandoc.org/MANUAL.html#fenced-code-blocks" class="uri">https://pandoc.org/MANUAL.html#fenced-code-blocks</a></p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>