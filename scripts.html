<head>
    <script> 
        function myFunction(id) {
          var x = document.getElementById(id); 
          if (x.style.display === "none") {
            x.style.display = "block";
          } else {
            x.style.display = "none";
          }
        }
        
        // Auto-detect system theme preference and apply it
        function setSystemTheme() {
          // Check if the browser supports prefers-color-scheme
          if (window.matchMedia) {
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const book = document.querySelector('.book');
            
            if (book) {
              // Remove existing theme classes
              book.classList.remove('color-theme-1', 'color-theme-2');
              
              if (prefersDark) {
                // Apply dark theme (color-theme-2)
                book.classList.add('color-theme-2');
              } else {
                // Apply sepia theme (color-theme-1) for light mode
                book.classList.add('color-theme-1');
              }
            }
          }
        }
        
        // Listen for changes in system theme preference
        function watchSystemTheme() {
          if (window.matchMedia) {
            const darkModeQuery = window.matchMedia('(prefers-color-scheme: dark)');
            darkModeQuery.addListener(setSystemTheme);
          }
        }
        
        // Apply theme when page loads
        document.addEventListener('DOMContentLoaded', function() {
          setSystemTheme();
          watchSystemTheme();
        });
        
        // Also try to apply immediately if DOM is already loaded
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', setSystemTheme);
        } else {
          setSystemTheme();
        }
    </script>
</head>
